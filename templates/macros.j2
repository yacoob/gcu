{% macro photo(img_url, title, thumb, forced_url='') -%}
{%- set imgsrc = thumb|default(img_url, true) -%}
{%- set icon = 'glyphicon-play-circle' if 'youtu' in img_url -%}
<div class='col-xs-6 col-md-3 col-lg-2'>
  <div class='gallery-entry voffset-bottom-small'>
    <a class='gallery' href='{{ forced_url|default(img_url, true) }}'>
      <img class='img-rounded img-responsive' src='{{ imgsrc|replace("full", "thumb") }}'{% if title %} title='{{ title|e }}' alt='{{ title|e }}'{% endif %} />
      <span class='glyphicon {{icon}} gallery-icon'></span>
    </a>
  </div>
</div>
{%- endmacro %}

{% macro title_row(title, url) -%}
<div class='col-sm-12 col-md-8 text-right'>
  <h1 class='title'><a href='{{ url }}'>{{ title }}</a></h1>
</div> <!-- column -->
{%- endmacro %}

{% macro thumbnail(link_url, img_url, title, width=3) -%}
<div class='col-xs-12 col-sm-4 col-md-{{ width }} text-center'>
  <div class='model'>
    <img class='img-rounded img-responsive' src='{{ img_url|replace('full', 'thumb') }}'>
    <div class='overlay'>
      <a href='{{ link_url }}'></a>
      <h3>{{ title }}</h3>
    </div>
  </div>
</div>
{%- endmacro %}

{% macro entry_photos(entry, rss=0, entry_url='') -%}
<div class='row voffset-small'>
{% for p in entry.photos %}
{%- set forced_url = entry_url|entry_image_link(loop.index) if rss else '' -%}
{%- set img_url = base_url + p.href if rss else p.href -%}
{{ photo(img_url, p.title, p.thumb, forced_url) }}
{% endfor %}
</div>
{%- endmacro %}
